<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Day 10 - Luminous 7</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;1,400&family=Montserrat:wght@300;500&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; touch-action: none; }
        
        body {
            background: #050a1a;
            height: 100vh; width: 100vw;
            overflow: hidden;
            font-family: 'Montserrat', sans-serif;
            transition: background 2s ease;
        }

        #magic-canvas { position: absolute; inset: 0; z-index: 1; pointer-events: none; }

        #login-overlay {
            position: fixed; inset: 0;
            background: #050a1a;
            z-index: 1000;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
        }

        .pass-box {
            background: transparent; border: none;
            border-bottom: 1px solid rgba(252, 228, 236, 0.3);
            color: #fce4ec; font-family: 'Playfair Display', serif;
            font-size: 1.5rem; text-align: center;
            outline: none; padding: 10px; width: 220px;
            letter-spacing: 5px;
        }

        #tap-hint {
            position: fixed; top: 45%; left: 50%;
            transform: translate(-50%, -50%);
            color: #fce4ec; font-family: 'Playfair Display', serif;
            font-style: italic; font-size: 1.1rem;
            opacity: 0; z-index: 10; pointer-events: none;
            text-align: center;
        }

        #flower-counter {
            position: fixed; bottom: 40px; left: 50%;
            transform: translateX(-50%);
            font-family: 'Montserrat', sans-serif;
            font-size: 0.7rem; letter-spacing: 3px;
            color: rgba(255, 255, 255, 0.5);
            z-index: 100; text-transform: uppercase;
            display: none;
        }

        #log-drawer {
            position: fixed; top: 0; right: -300px;
            width: 280px; height: 100%;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(15px);
            z-index: 500; padding: 70px 25px;
            transition: right 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
        }

        #log-drawer.open { right: 0; }
        .log-item { font-size: 0.8rem; color: #444; margin-bottom: 15px; border-left: 2px solid #fce4ec; padding-left: 10px; }

        #log-toggle {
            position: fixed; top: 20px; right: 20px;
            z-index: 600; background: #1a237e; color: white;
            border: none; padding: 10px 18px; border-radius: 50px;
            font-size: 0.6rem; letter-spacing: 1px; display: none; cursor: pointer;
        }

        .flower-svg { position: absolute; pointer-events: none; z-index: 2; }

        .floating-text {
            position: absolute; font-family: 'Playfair Display', serif;
            font-size: 1rem; color: #fff; pointer-events: none;
            z-index: 100; text-align: center; width: 240px;
            text-shadow: 0 0 10px rgba(0,0,0,0.5);
        }

        #letter-modal {
            position: fixed; inset: 0;
            background: #fce4ec; z-index: 2000;
            display: none; flex-direction: column;
            justify-content: center; align-items: center;
            padding: 40px; text-align: center;
        }
    </style>
</head>
<body>

    <div id="login-overlay">
        <input type="password" id="password" class="pass-box" placeholder="••••">
        <p style="margin-top:20px; font-size:0.55rem; opacity:0.4; letter-spacing:4px; color:white; text-align:center; padding: 0 20px;">
            PASSWORD<br>(What color we wore on our second date)
        </p>
    </div>

    <div id="tap-hint">Tap to unveil a weird thing I love...</div>
    <div id="flower-counter">Traits Discovered: <span id="count-num">0</span> / 7</div>

    <button id="log-toggle">ARCHIVE</button>
    <div id="log-drawer">
        <h3 style="font-family: 'Playfair Display'; margin-bottom: 20px; color: #1a237e;">The Archive</h3>
        <div id="log-list"></div>
    </div>

    <canvas id="magic-canvas"></canvas>

    <div id="letter-modal">
        <div style="max-width: 450px;">
            <h2 style="font-family: 'Playfair Display'; color: #1a237e; margin-bottom: 20px; font-style: italic;">Day 7</h2>
            <p style="font-family: 'Playfair Display'; font-size: 1.2rem; color: #2c3e50;">Every little quirk and every weird habit is why I'm so certain about us. Happy 7th day, my love. ❤️</p>
            <a href="index.html" style="margin-top:30px; display:inline-block; color:#1a237e; text-decoration:none; font-size:0.7rem; border:1px solid #1a237e; padding:10px 20px; border-radius:50px; letter-spacing:2px;">CONTINUE</a>
        </div>
    </div>

    <script>
        const secrets = [
            "The way you wipe your nose with your blanket.",
            "How you can switch from being a kid to my mom in seconds.",
            "How sometimes you ignore my messages and send me reels(ik you do it babe).",
            "The irritated face you make everytime you see something weird.",
            "How you pretend to cry so that I dont scold you.",
            "The way you scold me whenever i do something childish.",
            "How you get scared of pigeons."
        ];

        const flowerStyles = [
            (c) => `<circle cx="50" cy="30" r="25" fill="${c}"/><circle cx="50" cy="70" r="25" fill="${c}"/><circle cx="30" cy="50" r="25" fill="${c}"/><circle cx="70" cy="50" r="25" fill="${c}"/><circle cx="50" cy="50" r="15" fill="#1a237e"/>`,
            (c) => `<ellipse cx="50" cy="30" rx="15" ry="30" fill="${c}" transform="rotate(0 50 50)"/><ellipse cx="50" cy="30" rx="15" ry="30" fill="${c}" transform="rotate(72 50 50)"/><ellipse cx="50" cy="30" rx="15" ry="30" fill="${c}" transform="rotate(144 50 50)"/><ellipse cx="50" cy="30" rx="15" ry="30" fill="${c}" transform="rotate(216 50 50)"/><ellipse cx="50" cy="30" rx="15" ry="30" fill="${c}" transform="rotate(288 50 50)"/><circle cx="50" cy="50" r="12" fill="#1a237e"/>`,
            (c) => `<rect x="35" y="10" width="30" height="40" rx="15" fill="${c}" transform="rotate(0 50 50)"/><rect x="35" y="10" width="30" height="40" rx="15" fill="${c}" transform="rotate(120 50 50)"/><rect x="35" y="10" width="30" height="40" rx="15" fill="${c}" transform="rotate(240 50 50)"/><circle cx="50" cy="50" r="10" fill="#1a237e"/>`,
            (c) => `<path d="M50 10 Q60 35 90 50 Q60 65 50 90 Q40 65 10 50 Q40 35 50 10" fill="${c}"/><circle cx="50" cy="50" r="8" fill="#1a237e"/>`
        ];

        let count = 0, authenticated = false;
        const canvas = document.getElementById('magic-canvas'), ctx = canvas.getContext('2d');
        const colors = ['#fce4ec', '#f8bbd0', '#f48fb1', '#ffffff'];

        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize); resize();

        document.getElementById('password').addEventListener('input', (e) => {
            if(e.target.value.toLowerCase() === 'blue') {
                authenticated = true;
                gsap.to("#login-overlay", { opacity: 0, duration: 1, onComplete: () => {
                    document.getElementById('login-overlay').style.display = 'none';
                    document.getElementById('log-toggle').style.display = 'block';
                    document.getElementById('flower-counter').style.display = 'block';
                    gsap.to("#tap-hint", { opacity: 0.6, duration: 1 });
                }});
            }
        });

        document.getElementById('log-toggle').onclick = () => document.getElementById('log-drawer').classList.toggle('open');

        function handleTap(e) {
            if(!authenticated || count >= secrets.length) return;
            const x = e.touches ? e.touches[0].clientX : e.clientX, y = e.touches ? e.touches[0].clientY : e.clientY;

            if(count === 0) gsap.to("#tap-hint", { opacity: 0, duration: 0.5 });

            // 1. Random Flower
            const flower = document.createElement('div');
            flower.className = 'flower-svg';
            flower.style.left = `${x - 40}px`; flower.style.top = `${y - 40}px`;
            const style = flowerStyles[Math.floor(Math.random() * flowerStyles.length)];
            const color = colors[Math.floor(Math.random() * colors.length)];
            flower.innerHTML = `<svg width="80" height="80" viewBox="0 0 100 100">${style(color)}</svg>`;
            document.body.appendChild(flower);
            
            gsap.fromTo(flower, { scale: 0, rotation: -30 }, { scale: 1, rotation: 0, duration: 0.8, ease: "back.out(2)" });
            gsap.to(flower, { opacity: 0, scale: 0.5, y: -20, duration: 2, delay: 3, onComplete: () => flower.remove() });

            // 2. The Reveal
            const text = secrets[count], el = document.createElement('div');
            el.className = 'floating-text'; el.innerText = text;
            el.style.left = `${Math.max(20, Math.min(window.innerWidth - 260, x - 120))}px`;
            el.style.top = `${y - 60}px`;
            document.body.appendChild(el);
            
            gsap.fromTo(el, { opacity: 0, y: 10 }, { opacity: 1, y: -30, duration: 0.8 });
            gsap.to(el, { opacity: 0, y: -60, duration: 1, delay: 2.5, onComplete: () => el.remove() });

            // 3. Update Log & Counter
            const logItem = document.createElement('div');
            logItem.className = 'log-item'; logItem.innerText = text;
            document.getElementById('log-list').appendChild(logItem);
            
            count++;
            document.getElementById('count-num').innerText = count;
            
            // 4. Background Transition (scaled for 7)
            const p = count / secrets.length;
            document.body.style.background = `rgb(${5 + (252-5)*p}, ${10 + (228-10)*p}, ${26 + (236-26)*p})`;
            if(p > 0.5) document.querySelectorAll('.floating-text').forEach(t => t.style.color = "#1a237e");

            if(count === secrets.length) setTimeout(() => { document.getElementById('letter-modal').style.display = 'flex'; }, 4000);
        }

        window.addEventListener('mousedown', handleTap);
        window.addEventListener('touchstart', handleTap);

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            requestAnimationFrame(animate);
        }
        animate();
    </script>
</body>
</html>